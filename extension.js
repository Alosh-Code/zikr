const vscode = require('vscode');

function activate(context) {
	const allAdhkar = [
		"🌙 سبحان الله",
		"🌙 الحمد لله",
		"🌙 الله أكبر",
		"🌙 لا إله إلا الله",
		"🌙 لا حول ولا قوة إلا بالله",
		"🌙 أستغفر الله",
		"🌙 سبحان الله وبحمده",
		"🌙 سبحان الله العظيم",
		"🌙 اللهم صلِّ على محمد",
		"🌙 حسبي الله لا إله إلا هو عليه توكلت وهو رب العرش العظيم",
		"🌙 رب اغفر لي وتب عليّ إنك أنت التواب الرحيم",
		"🌙 اللهم إنك عفوٌ تحب العفو فاعفُ عني",
		"🌙 رضيت بالله ربًا، وبالإسلام دينًا، وبمحمد ﷺ نبيًا",
		"🌙 اللهم اجعلني من التوابين، واجعلني من المتطهرين",
		"🌙 اللهم آتنا في الدنيا حسنة وفي الآخرة حسنة وقنا عذاب النار",

		"🌙 اللهم صلِّ على محمد وعلى آله وصحبه أجمعين",
		"🌙 اللهم اجعلني من أهل القرآن الذين هم أهلك وخاصتك",
		"🌙 اللهم إني أعوذ بك من همزات الشياطين وأعوذ بك رب أن يحضرون",
		"🌙 اللهم اجعلنا من الذين يسيرون على صراطك المستقيم",
		"🌙 اللهم إني أسألك من فضلك ورحمتك وكرمك",
		"🌙 اللهم اجعلنا من الذين يستمعون القول فيتبعون أحسنه",
		"🌙 اللهم اجعلنا من الذين يذكرونك في كل حين",
		"🌙 اللهم إني أسألك رحمةً تغنيني بها عن رحمة من سواك",
		"🌙 اللهم ارحمنا إذا صرنا إلى ما صاروا إليه",
		"🌙 اللهم اجعلنا من الذين يسيرون إلى الجنة برحمتك",
		"🌙 اللهم إني أستغفرك من كل ذنبٍ يعكر صفو حياتي",
		"🌙 اللهم فرج همي ويسر أمري",
		"🌙 اللهم اجعلنا من الذين يتوكلون عليك في كل أمر",
		"🌙 اللهم تقبل منا عملنا واجعلنا من أهل الجنة",
		"🌙 اللهم اجعلنا من الذين يسيرون على نهج نبيك محمد ﷺ",

		"📖 {إِنَّ مَعَ الْعُسْرِ يُسْرًا} (الشرح: 6)",
		"📖 {وَقُل رَّبِّ زِدْنِي عِلْمًا} (طه: 114)",
		"📖 {فَإِنَّ مَعَ الْعُسْرِ يُسْرًا} (الشرح: 6)",
		"📖 {اللَّهُ نُورُ السَّمَاوَاتِ وَالْأَرْضِ} (النور: 35)",

		"🌙 اللهم إني أسالك من كل خيرٍ سألك منه نبيك محمد ﷺ",
		"🌙 اللهم ارزقنا من فضلك ورحمتك يا أرحم الراحمين",
		"🌙 اللهم اجعلني من الذين يسيرون في نورك",
		"🌙 اللهم ارزقنا الإخلاص في القول والعمل",
		"🌙 اللهم اجعلني من أهل العلم والعمل الصالح",
		"🌙 اللهم اغفر لنا وارحمنا، ووفقنا لما تحب وترضى",
		"🌙 اللهم إني أعوذ بك من كل همٍّ ومن كل خوف",
		"🌙 اللهم اجعلنا من الذين يستمعون القول فيتبعون أحسنه",
		"🌙 اللهم اجعلنا من أهل البر والتقوى",
		"🌙 اللهم إني أسألك شفاءً لا يغادر سقمًا",
		"🌙 اللهم اجعلنا من الذين يتبعون هدي النبي ﷺ",
		"🌙 اللهم اجعلنا من الذين يذكرونك قيامًا وقعودًا وعلى جنوبهم",
		"🌙 اللهم اجعلنا من أهل الجنة",
		"🌙 اللهم اجعلنا من الذين يُعطون الكتاب باليمين",
		"🌙 اللهم اجعلنا من الذين يسيرون على صراطك المستقيم",
		"🌙 اللهم إني أسالك فوزًا في الدنيا وفي الآخرة",
		"🌙 اللهم اجعلني من الذين تُظلهم في ظل عرشك يوم لا ظل إلا ظلك",
		"🌙 اللهم اجعلنا من الذين يفوزون برؤيتك في الجنة",
		"🌙 اللهم اجعلنا من الذين يدعون إلى الخير ويسيرون على دربك",
		"🌙 اللهم اجعلنا من الذين تحبهم وترضى عنهم"
	];

	let remainingAdhkar = [...allAdhkar]; 
	const config = vscode.workspace.getConfiguration();
	const intervalInSeconds = config.get("dhikrReminder.intervalInSeconds", 30);

	const reminder = setInterval(() => {
		if (remainingAdhkar.length === 0) {
			remainingAdhkar = [...allAdhkar];
		}

		const randomIndex = Math.floor(Math.random() * remainingAdhkar.length);
		const selectedDhikr = remainingAdhkar.splice(randomIndex, 1)[0]; 
		vscode.window.showInformationMessage(selectedDhikr);
	}, intervalInSeconds * 1000);

	context.subscriptions.push({
		dispose() {
			clearInterval(reminder);
		}
	});
}

function deactivate() {}

module.exports = {
	activate,
	deactivate
};
